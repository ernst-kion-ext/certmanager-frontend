<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Certmanager Codesign - Certificate List</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/loadCertificates.js"></script>
    <script src="js/certificate-list.js"></script>
    <script src="js/app.js"></script>
</head>
<body>
    <h1>Certificate Manager</h1>

    <div>
        <label for="server-select">Choose server:</label>
        <select id="server-select">
            <option value="https://vault.kiongroup.com:8200/">Production</option>
            <option value="https://vault-uat.kiongroup.com:8200/">UAT (Testing)</option>
            <option value="http://localhost:8000/">Localhost</option>
            <option value="https://vault.seele-00.asuka-shikinami.club/">Ernst</option>
        </select>
    </div>

    <div>
        <label for="api-key-input">API Key:</label>
        <input type="text" id="api-key-input" placeholder="Enter API key for certmanager ui server">
        <label for="certamount-input" style="margin-left:10px;">Max certificates:</label>
        <input type="number" id="certamount-input" min="1" style="width:80px;" placeholder="All">
        <button id="fetch-certificates-btn" onclick="fetchCertificates()">Submit</button>
    </div>

    <h2>Certificate Table</h2>
    <div style="margin-bottom: 10px;">
        <input
            type="text"
            id="filter-input"
            placeholder="Search all fields"
            style="width: 50%; padding: 4px;"
        >
    </div>
    <table>
      <thead>
        <tr>
          <th>Subject</th>
          <th>Not Valid Before</th>
          <th>Not Valid After</th>
          <th>Days Left</th>
          <th>Key Usage</th>
          <th>Issuer</th>
          <th>Status</th>
          <th>Fingerprint</th>
          <th>Signature Hash Algorithm</th>
          <th>Public Key Type</th>
          <th>Public Key Size</th>
          <th>Signature</th>
        </tr>
        <tr id="column-search-row"></tr>
      </thead>
      <tbody id="certificates-body"></tbody>
    </table>

    <!-- Signature Modal -->
    <div id="signature-modal">
      <div id="signature-modal-content">
        <button id="signature-modal-close">&times;</button>
        <h3>Certificate Signature</h3>
        <pre id="signature-modal-text"></pre>
        <button id="signature-modal-copy">Copy to Clipboard</button>
        <span id="signature-modal-copied">Copied!</span>
      </div>
    </div>
</body>
</html>